<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>LibXML::XML::Parser</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          LibXML::XML::Parser
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../../files/ext/libxml/libxml_c.html">ext/libxml/libxml.c</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../../files/lib/libxml/parser_rb.html">lib/libxml/parser.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../../files/lib/libxml/sax_parser_rb.html">lib/libxml/sax_parser.rb</a>
          </li>
          <li>
            <a class='show' href='#' onclick='this.parentNode.parentNode.className += " expanded"; this.parentNode.removeChild(this); return false'>show all</a>
          </li>
        </ol>
        <div class='parent'>
          Superclass:
          <strong><a target="docwin" href="../../Object.html">Object</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>The <a href="Parser.html">XML::Parser</a> provides a tree based API for
            processing xml documents, in contract to XML::Reader&#39;s stream based api
            and <a href="SaxParser.html">XML::SaxParser</a> callback based API.</p>
            
            <p>As a result, parsing a document creates an in-memory document object that
            consist of any number of <a href="Node.html">XML::Node</a> instances.  This
            is simple and powerful model, but has the major limitation that the size of
            the document that can be processed is limited by the amount of memory
            available.  In such cases, it is better to use the <a
            href="Reader.html">XML::Reader</a>.</p>
            
            <p>Using the parser is simple:</p>
            
            <pre class="ruby"><span class="ruby-identifier">parser</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">file</span>(<span class="ruby-string">&#39;my_file&#39;</span>)&#x000A;<span class="ruby-identifier">doc</span> = <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse</span></pre>
            
            <p>You can also parse documents (see <a
            href="Parser.html#method-c-document">::document</a>),  strings (see <a
            href="Parser.html#method-c-string">::string</a>) and io objects (see <a
            href="Parser.html#method-c-io">::io</a>).</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-document">document</a></li>
              <li><a target="docwin" href="#method-c-file">file</a></li>
              <li><a target="docwin" href="#method-c-io">io</a></li>
              <li><a target="docwin" href="#method-c-new">new</a></li>
              <li><a target="docwin" href="#method-c-register_error_handler">register_error_handler</a></li>
              <li><a target="docwin" href="#method-c-string">string</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#attribute-i-context">context</a></li>
              <li><a target="docwin" href="#attribute-i-input">input</a></li>
              <li><a target="docwin" href="#method-i-parse">parse</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='class-list'>
            <h2>Classes and Modules</h2>
            <ol>
              <li><a target="docwin" href="Parser/Options.html">LibXML::XML::Parser::Options</a></li>
              <li><a target="docwin" href="Parser/Context.html">LibXML::XML::Parser::Context</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-context'>context</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-input'>input</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-document'>
                <a name='method-c-document'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Parser.document(document) -> XML::Parser</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new parser for the specified document.</p>
                  
                  <p>Parameters:</p>
                  
                  <pre>document - A preparsed document.</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-document-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-document-source'><span class="ruby-comment"># File lib/libxml/parser.rb, line 13</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">document</span>(<span class="ruby-identifier">doc</span>)&#x000A;  <span class="ruby-identifier">context</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">document</span>(<span class="ruby-identifier">doc</span>)&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">context</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-file'>
                <a name='method-c-file'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Parser.file(path) -> XML::Parser</div>
                    <div>XML::Parser.file(path, :encoding => XML::Encoding::UTF_8,</div>
                    <div>:options => XML::Parser::Options::NOENT) -> XML::Parser</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new parser for the specified file or uri.</p>
                  
                  <p>You may provide an optional hash table to control how the parsing is
                  performed.  Valid options are:</p>
                  
                  <pre>encoding - The document encoding, defaults to nil. Valid values&#x000A;           are the encoding constants defined on XML::Encoding.&#x000A;options - Parser options.  Valid values are the constants defined on&#x000A;          XML::Parser::Options.  Mutliple options can be combined&#x000A;          by using Bitwise OR (|).</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-file-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-file-source'><span class="ruby-comment"># File lib/libxml/parser.rb, line 33</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span> = {})&#x000A;  <span class="ruby-identifier">context</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">file</span>(<span class="ruby-identifier">path</span>)&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>]&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>]&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">context</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-io'>
                <a name='method-c-io'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Parser.io(io) -> XML::Parser</div>
                    <div>XML::Parser.io(io, :encoding => XML::Encoding::UTF_8,</div>
                    <div>:options => XML::Parser::Options::NOENT</div>
                    <div>:base_uri="http://libxml.org") -> XML::Parser</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new parser for the specified io object.</p>
                  
                  <p>Parameters:</p>
                  
                  <pre>io - io object that contains the xml to parser&#x000A;base_uri - The base url for the parsed document.&#x000A;encoding - The document encoding, defaults to nil. Valid values&#x000A;           are the encoding constants defined on XML::Encoding.&#x000A;options - Parser options.  Valid values are the constants defined on&#x000A;          XML::Parser::Options.  Mutliple options can be combined&#x000A;          by using Bitwise OR (|).</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-io-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-io-source'><span class="ruby-comment"># File lib/libxml/parser.rb, line 57</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">io</span>(<span class="ruby-identifier">io</span>, <span class="ruby-identifier">options</span> = {})&#x000A;  <span class="ruby-identifier">context</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">io</span>(<span class="ruby-identifier">io</span>)&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">base_uri</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_uri</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_uri</span>]&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>]&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>]&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">context</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>parser.initialize(context) -> XML::Parser</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new <a href="Parser.html">XML::Parser</a> from the specified  <a
                  href="Parser/Context.html">XML::Parser::Context</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'>static VALUE rxml_parser_initialize(int argc, VALUE *argv, VALUE self)&#x000A;{&#x000A;  VALUE context = Qnil;&#x000A;&#x000A;  rb_scan_args(argc, argv, &quot;01&quot;, &amp;context);&#x000A;&#x000A;  if (context == Qnil)&#x000A;  {&#x000A;    rb_warn(&quot;Passing no parameters to XML::Parser.new is deprecated.  Pass an instance of XML::Parser::Context instead.&quot;);&#x000A;    context = rb_class_new_instance(0, NULL, cXMLParserContext);&#x000A;  }&#x000A;&#x000A;  rb_ivar_set(self, CONTEXT_ATTR, context);&#x000A;  return self;&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-register_error_handler'>
                <a name='method-c-register_error_handler'></a>
                <div class='synopsis'>
                  <span class='name'>register_error_handler</span>
                  <span class='arguments'>(proc)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-register_error_handler-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-register_error_handler-source'><span class="ruby-comment"># File lib/libxml/parser.rb, line 90</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">register_error_handler</span>(<span class="ruby-identifier">proc</span>)&#x000A;  <span class="ruby-identifier">warn</span>(<span class="ruby-string">&#39;Parser.register_error_handler is deprecated.  Use Error.set_handler instead&#39;</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">nil?</span>&#x000A;    <span class="ruby-constant">Error</span>.<span class="ruby-identifier">reset_handler</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-constant">Error</span>.<span class="ruby-identifier">set_handler</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">proc</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-string'>
                <a name='method-c-string'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Parser.string(string)</div>
                    <div>XML::Parser.string(string, :encoding => XML::Encoding::UTF_8,</div>
                    <div>:options => XML::Parser::Options::NOENT</div>
                    <div>:base_uri="http://libxml.org") -> XML::Parser</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new parser by parsing the specified string.</p>
                  
                  <p>You may provide an optional hash table to control how the parsing is
                  performed.  Valid options are:</p>
                  
                  <pre>base_uri - The base url for the parsed document.&#x000A;encoding - The document encoding, defaults to nil. Valid values&#x000A;           are the encoding constants defined on XML::Encoding.&#x000A;options - Parser options.  Valid values are the constants defined on&#x000A;          XML::Parser::Options.  Mutliple options can be combined&#x000A;          by using Bitwise OR (|).</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-string-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-string-source'><span class="ruby-comment"># File lib/libxml/parser.rb, line 82</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span> = {})&#x000A;  <span class="ruby-identifier">context</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">string</span>(<span class="ruby-identifier">string</span>)&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">base_uri</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_uri</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_uri</span>]&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>]&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>]&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">context</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-parse'>
                <a name='method-i-parse'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>parser.parse -> XML::Document</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Parse the input <a href="../XML.html">XML</a> and create an <a
                  href="Document.html">XML::Document</a> with it&#39;s content. If an error
                  occurs, XML::Parser::ParseError is thrown.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-parse-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-parse-source'>static VALUE rxml_parser_parse(VALUE self)&#x000A;{&#x000A;  xmlParserCtxtPtr ctxt;&#x000A;  VALUE context = rb_ivar_get(self, CONTEXT_ATTR);&#x000A;  &#x000A;  Data_Get_Struct(context, xmlParserCtxt, ctxt);&#x000A;&#x000A;  if ((xmlParseDocument(ctxt) == -1 || !ctxt-&gt;wellFormed) &amp;&amp; ! ctxt-&gt;recovery)&#x000A;  {&#x000A;    if (ctxt-&gt;myDoc)&#x000A;      xmlFreeDoc(ctxt-&gt;myDoc);&#x000A;    rxml_raise(&amp;ctxt-&gt;lastError);&#x000A;  }&#x000A;&#x000A;  rb_funcall(context, rb_intern(&quot;close&quot;), 0);&#x000A;&#x000A;  return rxml_document_wrap(ctxt-&gt;myDoc);&#x000A;}</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
