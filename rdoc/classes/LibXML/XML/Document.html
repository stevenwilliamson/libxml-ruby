<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>LibXML::XML::Document</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          LibXML::XML::Document
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../../files/ext/libxml/libxml_c.html">ext/libxml/libxml.c</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../../../files/lib/libxml/document_rb.html">lib/libxml/document.rb</a>
          </li>
          <li>
            <a class='show' href='#' onclick='this.parentNode.parentNode.className += " expanded"; this.parentNode.removeChild(this); return false'>show all</a>
          </li>
        </ol>
        <div class='parent'>
          Superclass:
          <strong><a target="docwin" href="../../Object.html">Object</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>The <a href="Document.html">XML::Document</a> class provides a tree based
            API for working with xml documents.  You may directly create a document and
            manipulate it, or create a document from a data source by using an <a
            href="Parser.html">XML::Parser</a> object.</p>
            
            <p>To read a document from a file:</p>
            
            <pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">file</span>(<span class="ruby-string">&#39;my_file&#39;</span>)</pre>
            
            <p>To use a parser to read a document:</p>
            
            <pre class="ruby"><span class="ruby-identifier">parser</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">file</span>(<span class="ruby-string">&#39;my_file&#39;</span>)&#x000A;<span class="ruby-identifier">doc</span> = <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse</span></pre>
            
            <p>To create a document from scratch:</p>
            
            <pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>()&#x000A;<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;root_node&#39;</span>)&#x000A;<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;elem1&#39;</span>)&#x000A;<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">save</span>(<span class="ruby-identifier">filename</span>, :<span class="ruby-identifier">indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, :<span class="ruby-identifier">encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)</pre>
            
            <p>To write a document to a file:</p>
            
            <pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>()&#x000A;<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;root_node&#39;</span>)&#x000A;<span class="ruby-identifier">root</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>&#x000A;&#x000A;<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">elem1</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;elem1&#39;</span>)&#x000A;<span class="ruby-identifier">elem1</span>[<span class="ruby-string">&#39;attr1&#39;</span>] = <span class="ruby-string">&#39;val1&#39;</span>&#x000A;<span class="ruby-identifier">elem1</span>[<span class="ruby-string">&#39;attr2&#39;</span>] = <span class="ruby-string">&#39;val2&#39;</span>&#x000A;&#x000A;<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">elem2</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;elem2&#39;</span>)&#x000A;<span class="ruby-identifier">elem2</span>[<span class="ruby-string">&#39;attr1&#39;</span>] = <span class="ruby-string">&#39;val1&#39;</span>&#x000A;<span class="ruby-identifier">elem2</span>[<span class="ruby-string">&#39;attr2&#39;</span>] = <span class="ruby-string">&#39;val2&#39;</span>&#x000A;&#x000A;<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">elem3</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;elem3&#39;</span>)&#x000A;<span class="ruby-identifier">elem3</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">elem4</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;elem4&#39;</span>)&#x000A;<span class="ruby-identifier">elem3</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">elem5</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;elem5&#39;</span>)&#x000A;&#x000A;<span class="ruby-identifier">elem5</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">elem6</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;elem6&#39;</span>)&#x000A;<span class="ruby-identifier">elem6</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;Content for element 6&#39;</span>&#x000A;&#x000A;<span class="ruby-identifier">elem3</span>[<span class="ruby-string">&#39;attr&#39;</span>] = <span class="ruby-string">&#39;baz&#39;</span>&#x000A;&#x000A;<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">save</span>(<span class="ruby-identifier">filename</span>, :<span class="ruby-identifier">indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, :<span class="ruby-identifier">encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)</pre>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-document">document</a></li>
              <li><a target="docwin" href="#method-c-file">file</a></li>
              <li><a target="docwin" href="#method-c-io">io</a></li>
              <li><a target="docwin" href="#method-c-new">new</a></li>
              <li><a target="docwin" href="#method-c-string">string</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-canonicalize">canonicalize</a></li>
              <li><a target="docwin" href="#method-i-child">child</a></li>
              <li><a target="docwin" href="#method-i-child-3F">child?</a></li>
              <li><a target="docwin" href="#method-i-compression">compression</a></li>
              <li><a target="docwin" href="#method-i-compression-3D">compression=</a></li>
              <li><a target="docwin" href="#method-i-compression-3F">compression?</a></li>
              <li><a target="docwin" href="#method-i-context">context</a></li>
              <li><a target="docwin" href="#method-i-debug">debug</a></li>
              <li><a target="docwin" href="#method-i-encoding">encoding</a></li>
              <li><a target="docwin" href="#method-i-encoding-3D">encoding=</a></li>
              <li><a target="docwin" href="#method-i-find">find</a></li>
              <li><a target="docwin" href="#method-i-find_first">find_first</a></li>
              <li><a target="docwin" href="#method-i-import">import</a></li>
              <li><a target="docwin" href="#method-i-last">last</a></li>
              <li><a target="docwin" href="#method-i-last-3F">last?</a></li>
              <li><a target="docwin" href="#method-i-next">next</a></li>
              <li><a target="docwin" href="#method-i-next-3F">next?</a></li>
              <li><a target="docwin" href="#method-i-node_type">node_type</a></li>
              <li><a target="docwin" href="#method-i-node_type_name">node_type_name</a></li>
              <li><a target="docwin" href="#method-i-order_elements-21">order_elements!</a></li>
              <li><a target="docwin" href="#method-i-parent">parent</a></li>
              <li><a target="docwin" href="#method-i-parent-3F">parent?</a></li>
              <li><a target="docwin" href="#method-i-prev">prev</a></li>
              <li><a target="docwin" href="#method-i-prev-3F">prev?</a></li>
              <li><a target="docwin" href="#method-i-rb_encoding">rb_encoding</a></li>
              <li><a target="docwin" href="#method-i-root">root</a></li>
              <li><a target="docwin" href="#method-i-root-3D">root=</a></li>
              <li><a target="docwin" href="#method-i-save">save</a></li>
              <li><a target="docwin" href="#method-i-standalone-3F">standalone?</a></li>
              <li><a target="docwin" href="#method-i-to_s">to_s</a></li>
              <li><a target="docwin" href="#method-i-url">url</a></li>
              <li><a target="docwin" href="#method-i-validate">validate</a></li>
              <li><a target="docwin" href="#method-i-validate_relaxng">validate_relaxng</a></li>
              <li><a target="docwin" href="#method-i-validate_schema">validate_schema</a></li>
              <li><a target="docwin" href="#method-i-version">version</a></li>
              <li><a target="docwin" href="#method-i-xhtml-3F">xhtml?</a></li>
              <li><a target="docwin" href="#method-i-xinclude">xinclude</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>XML_C14N_1_0</td>
                    <td>=</td>
                    <td class='context-item-value'>INT2NUM(XML_C14N_1_0)</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Original C14N 1.0 spec</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>XML_C14N_1_1</td>
                    <td>=</td>
                    <td class='context-item-value'>INT2NUM(XML_C14N_1_1)</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>C14N 1.1 spec</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>XML_C14N_EXCLUSIVE_1_0</td>
                    <td>=</td>
                    <td class='context-item-value'>INT2NUM(XML_C14N_EXCLUSIVE_1_0)</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Exclusive C14N 1.0 spec</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-document'>
                <a name='method-c-document'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Document.document(document) -> XML::Document</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new document based on the specified document.</p>
                  
                  <p>Parameters:</p>
                  
                  <pre>document - A preparsed document.</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-document-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-document-source'><span class="ruby-comment"># File lib/libxml/document.rb, line 13</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">document</span>(<span class="ruby-identifier">value</span>)&#x000A;  <span class="ruby-constant">Parser</span>.<span class="ruby-identifier">document</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">parse</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-file'>
                <a name='method-c-file'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Document.file(path) -> XML::Document</div>
                    <div>XML::Document.file(path, :encoding => XML::Encoding::UTF_8,</div>
                    <div>:options => XML::Parser::Options::NOENT) -> XML::Document</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new document from the specified file or uri.</p>
                  
                  <p>You may provide an optional hash table to control how the parsing is
                  performed.  Valid options are:</p>
                  
                  <pre>encoding - The document encoding, defaults to nil. Valid values&#x000A;           are the encoding constants defined on XML::Encoding.&#x000A;options - Parser options.  Valid values are the constants defined on&#x000A;          XML::Parser::Options.  Mutliple options can be combined&#x000A;          by using Bitwise OR (|).</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-file-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-file-source'><span class="ruby-comment"># File lib/libxml/document.rb, line 32</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">file</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span> = {})&#x000A;  <span class="ruby-constant">Parser</span>.<span class="ruby-identifier">file</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">parse</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-io'>
                <a name='method-c-io'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Document.io(io) -> XML::Document</div>
                    <div>XML::Document.io(io, :encoding => XML::Encoding::UTF_8,</div>
                    <div>:options => XML::Parser::Options::NOENT</div>
                    <div>:base_uri="http://libxml.org") -> XML::Document</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new document from the specified io object.</p>
                  
                  <p>Parameters:</p>
                  
                  <pre>io - io object that contains the xml to parser&#x000A;base_uri - The base url for the parsed document.&#x000A;encoding - The document encoding, defaults to nil. Valid values&#x000A;           are the encoding constants defined on XML::Encoding.&#x000A;options - Parser options.  Valid values are the constants defined on&#x000A;          XML::Parser::Options.  Mutliple options can be combined&#x000A;          by using Bitwise OR (|).</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-io-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-io-source'><span class="ruby-comment"># File lib/libxml/document.rb, line 53</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">io</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span> = {})&#x000A;  <span class="ruby-constant">Parser</span>.<span class="ruby-identifier">io</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">parse</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Document.initialize(xml_version = 1.0) -> document</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Initializes a new <a href="Document.html">XML::Document</a>, optionally
                  specifying the <a href="../XML.html">XML</a> version.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'>static VALUE rxml_document_initialize(int argc, VALUE *argv, VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;  VALUE xmlver;&#x000A;&#x000A;  switch (argc)&#x000A;  {&#x000A;  case 0:&#x000A;    xmlver = rb_str_new2(&quot;1.0&quot;);&#x000A;    break;&#x000A;  case 1:&#x000A;    rb_scan_args(argc, argv, &quot;01&quot;, &amp;xmlver);&#x000A;    break;&#x000A;  default:&#x000A;    rb_raise(rb_eArgError, &quot;wrong number of arguments (need 0 or 1)&quot;);&#x000A;  }&#x000A;&#x000A;  Check_Type(xmlver, T_STRING);&#x000A;  xdoc = xmlNewDoc((xmlChar*) StringValuePtr(xmlver));&#x000A;  xdoc-&gt;_private = (void*) self;&#x000A;  DATA_PTR(self) = xdoc;&#x000A;&#x000A;  return self;&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-string'>
                <a name='method-c-string'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>XML::Document.string(string) -> XML::Document</div>
                    <div>XML::Document.string(string, :encoding => XML::Encoding::UTF_8,</div>
                    <div>:options => XML::Parser::Options::NOENT</div>
                    <div>:base_uri="http://libxml.org") -> XML::Document</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a new document from the specified string.</p>
                  
                  <p>You may provide an optional hash table to control how the parsing is
                  performed.  Valid options are:</p>
                  
                  <pre>base_uri - The base url for the parsed document.&#x000A;encoding - The document encoding, defaults to nil. Valid values&#x000A;           are the encoding constants defined on XML::Encoding.&#x000A;options  - Parser options.  Valid values are the constants defined on&#x000A;           XML::Parser::Options.  Mutliple options can be combined&#x000A;           by using Bitwise OR (|).</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-string-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-string-source'><span class="ruby-comment"># File lib/libxml/document.rb, line 74</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">string</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span> = {})&#x000A;  <span class="ruby-constant">Parser</span>.<span class="ruby-identifier">string</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">parse</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-canonicalize'>
                <a name='method-i-canonicalize'></a>
                <div class='synopsis'>
                  <span class='name'>canonicalize</span>
                  <span class='arguments'>(p1 = v1)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-canonicalize-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-canonicalize-source'>static VALUE&#x000A;rxml_document_canonicalize(int argc, VALUE *argv, VALUE self)&#x000A;{&#x000A;  VALUE result = Qnil;&#x000A;  int length;&#x000A;  xmlDocPtr xdoc;&#x000A;  xmlChar *buffer = NULL;&#x000A;  VALUE option_hash = Qnil;&#x000A;  VALUE o_nodes = Qnil;&#x000A;&#x000A;  // :comments option&#x000A;  VALUE comments = Qfalse;&#x000A;  // :mode option&#x000A;  int c14n_mode = XML_C14N_1_0;&#x000A;  // :inclusive_ns_prefixes option (ARRAY)&#x000A;&#x000A;  xmlChar * inc_ns_prefixes_ptr[C14N_NS_LIMIT];&#x000A;&#x000A;  // :nodes option (ARRAY)&#x000A;  xmlNodePtr  node_ptr_array[C14N_NODESET_LIMIT];&#x000A;  xmlNodeSet nodeset = {&#x000A;    0, C14N_NODESET_LIMIT, NULL&#x000A;  };&#x000A;&#x000A;  /* At least one NULL value must be defined in the array or the extension will&#x000A;   * segfault when using XML_C14N_EXCLUSIVE_1_0 mode.&#x000A;   * API docs: &quot;list of inclusive namespace prefixes ended with a NULL&quot;&#x000A;   */&#x000A;  inc_ns_prefixes_ptr[0] = NULL;&#x000A;&#x000A;  rb_scan_args(argc, argv, &quot;01&quot;, &amp;option_hash);&#x000A;  // Do stuff if ruby hash passed as argument&#x000A;  if (!NIL_P(option_hash)) &#x000A;  {&#x000A;        VALUE o_comments = Qnil;&#x000A;        VALUE o_mode = Qnil;&#x000A;        VALUE o_i_ns_prefixes = Qnil;&#x000A;                &#x000A;    Check_Type(option_hash, T_HASH);&#x000A;&#x000A;    o_comments = rb_hash_aref(option_hash, ID2SYM(rb_intern(&quot;comments&quot;)));&#x000A;    comments = (RTEST(o_comments) ? 1 : 0);&#x000A;&#x000A;    o_mode = rb_hash_aref(option_hash, ID2SYM(rb_intern(&quot;mode&quot;)));&#x000A;    if (!NIL_P(o_mode)) &#x000A;        {&#x000A;      Check_Type(o_mode, T_FIXNUM);&#x000A;      c14n_mode = NUM2INT(o_mode);&#x000A;      //TODO: clean this up&#x000A;      //if (c14n_mode &gt; 2) { c14n_mode = 0; }&#x000A;      //mode_int = (NUM2INT(o_mode) &gt; 2 ? 0 : NUM2INT(o_mode));&#x000A;    }&#x000A;&#x000A;    o_i_ns_prefixes = rb_hash_aref(option_hash, ID2SYM(rb_intern(&quot;inclusive_ns_prefixes&quot;)));&#x000A;    if (!NIL_P(o_i_ns_prefixes)) &#x000A;        {&#x000A;      int i;&#x000A;      int p = 0; //pointer array index&#x000A;      VALUE *list_in = NULL;&#x000A;      int list_size = 0;&#x000A;&#x000A;          Check_Type(o_i_ns_prefixes, T_ARRAY);&#x000A;      list_in = RARRAY_PTR(o_i_ns_prefixes);&#x000A;      list_size = RARRAY_LEN(o_i_ns_prefixes);&#x000A;&#x000A;      if (list_size &gt; 0) &#x000A;          {&#x000A;        for(i=0; i &lt; list_size; ++i) {&#x000A;          if (p &gt;= C14N_NS_LIMIT) { break; }&#x000A;&#x000A;          if (RTEST(list_in[i])) &#x000A;                  {&#x000A;            if (TYPE(list_in[i]) == T_STRING) &#x000A;                        {&#x000A;              inc_ns_prefixes_ptr[p] = (xmlChar *)StringValueCStr(list_in[i]);&#x000A;              p++;&#x000A;            }&#x000A;          }&#x000A;        }&#x000A;      }&#x000A;&#x000A;      // ensure p is not out of bound&#x000A;      p = (p &gt;= C14N_NS_LIMIT ? (C14N_NS_LIMIT-1) : p);&#x000A;&#x000A;      // API docs: &quot;list of inclusive namespace prefixes ended with a NULL&quot;&#x000A;      // Set last element to NULL&#x000A;      inc_ns_prefixes_ptr[p] = NULL;&#x000A;    }&#x000A;    //o_ns_prefixes will free at end of block&#x000A;&#x000A;    o_nodes = rb_hash_aref(option_hash, ID2SYM(rb_intern(&quot;nodes&quot;)));&#x000A;    if (!NIL_P(o_nodes)) &#x000A;        {&#x000A;      int i;&#x000A;      int p = 0; // index of pointer array&#x000A;      VALUE * list_in = NULL;&#x000A;      int node_list_size = 0;&#x000A;&#x000A;          if (CLASS_OF(o_nodes) == cXMLXPathObject)&#x000A;          {&#x000A;                  o_nodes = rb_funcall(o_nodes, rb_intern(&quot;to_a&quot;), 0);&#x000A;          }&#x000A;          else&#x000A;          {&#x000A;                  Check_Type(o_nodes, T_ARRAY);&#x000A;          }&#x000A;      list_in = RARRAY_PTR(o_nodes);&#x000A;      node_list_size = RARRAY_LEN(o_nodes);&#x000A;&#x000A;      for (i=0; i &lt; node_list_size; ++i)&#x000A;          {&#x000A;        if (p &gt;= C14N_NODESET_LIMIT) { break; }&#x000A;&#x000A;        if (RTEST(list_in[i])) &#x000A;                {&#x000A;          xmlNodePtr node_ptr;&#x000A;          Data_Get_Struct(list_in[i], xmlNode, node_ptr);&#x000A;          node_ptr_array[p] = node_ptr;&#x000A;          p++;&#x000A;        }&#x000A;      }&#x000A;&#x000A;      // Need to set values in nodeset struct&#x000A;      nodeset.nodeNr = (node_list_size &gt; C14N_NODESET_LIMIT ?&#x000A;                        C14N_NODESET_LIMIT :&#x000A;                        node_list_size);&#x000A;      nodeset.nodeTab = node_ptr_array;&#x000A;    }&#x000A;  }//option_hash&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  length = xmlC14NDocDumpMemory(&#x000A;    xdoc,&#x000A;    (nodeset.nodeNr == 0 ? NULL : &amp;nodeset),&#x000A;    c14n_mode,&#x000A;    inc_ns_prefixes_ptr,&#x000A;    comments,&#x000A;    &amp;buffer&#x000A;  );&#x000A;&#x000A;  if (buffer)&#x000A;  {&#x000A;    result = rxml_new_cstr((const char*) buffer, NULL);&#x000A;    xmlFree(buffer);&#x000A;  }&#x000A;&#x000A;  return result;&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-child'>
                <a name='method-i-child'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.child -> node</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Get this document&#39;s child node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-child-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-child-source'>static VALUE rxml_document_child_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;children == NULL)&#x000A;    return (Qnil);&#x000A;&#x000A;  return rxml_node_wrap(xdoc-&gt;children);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-child-3F'>
                <a name='method-i-child-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.child? -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Determine whether this document has a child node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-child-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-child-3F-source'>static VALUE rxml_document_child_q(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;children == NULL)&#x000A;    return (Qfalse);&#x000A;  else&#x000A;    return (Qtrue);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-compression'>
                <a name='method-i-compression'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.compression -> num</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain this document&#39;s compression mode identifier.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-compression-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-compression-source'>static VALUE rxml_document_compression_get(VALUE self)&#x000A;{&#x000A;#ifdef HAVE_ZLIB_H&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  int compmode;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  compmode = xmlGetDocCompressMode(xdoc);&#x000A;  if (compmode == -1)&#x000A;  return(Qnil);&#x000A;  else&#x000A;  return(INT2NUM(compmode));&#x000A;#else&#x000A;  rb_warn(&quot;libxml not compiled with zlib support&quot;);&#x000A;  return (Qfalse);&#x000A;#endif&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-compression-3D'>
                <a name='method-i-compression-3D'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.compression = num</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Set this document&#39;s compression mode.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-compression-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-compression-3D-source'>static VALUE rxml_document_compression_set(VALUE self, VALUE num)&#x000A;{&#x000A;#ifdef HAVE_ZLIB_H&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  int compmode;&#x000A;  Check_Type(num, T_FIXNUM);&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc == NULL)&#x000A;  {&#x000A;    return(Qnil);&#x000A;  }&#x000A;  else&#x000A;  {&#x000A;    xmlSetDocCompressMode(xdoc, NUM2INT(num));&#x000A;&#x000A;    compmode = xmlGetDocCompressMode(xdoc);&#x000A;    if (compmode == -1)&#x000A;    return(Qnil);&#x000A;    else&#x000A;    return(INT2NUM(compmode));&#x000A;  }&#x000A;#else&#x000A;  rb_warn(&quot;libxml compiled without zlib support&quot;);&#x000A;  return (Qfalse);&#x000A;#endif&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-compression-3F'>
                <a name='method-i-compression-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.compression? -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Determine whether this document is compressed.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-compression-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-compression-3F-source'>static VALUE rxml_document_compression_q(VALUE self)&#x000A;{&#x000A;#ifdef HAVE_ZLIB_H&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;compression != -1)&#x000A;  return(Qtrue);&#x000A;  else&#x000A;  return(Qfalse);&#x000A;#else&#x000A;  rb_warn(&quot;libxml compiled without zlib support&quot;);&#x000A;  return (Qfalse);&#x000A;#endif&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-context'>
                <a name='method-i-context'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.context(namespaces=nil) -> XPath::Context</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Returns a new XML::XPathContext for the document.</p>
                  
                  <p><a href="Namespaces.html">Namespaces</a> is an optional array of XML::NS
                  objects</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-context-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-context-source'><span class="ruby-comment"># File lib/libxml/document.rb, line 84</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">context</span>(<span class="ruby-identifier">nslist</span> = <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">context</span> = <span class="ruby-constant">XPath</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">node</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">root</span>&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">register_namespaces_from_node</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">root</span>)&#x000A;  <span class="ruby-identifier">context</span>.<span class="ruby-identifier">register_namespaces</span>(<span class="ruby-identifier">nslist</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">nslist</span>&#x000A;  <span class="ruby-identifier">context</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-debug'>
                <a name='method-i-debug'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>node.debug -> true|false</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Print libxml debugging information to stdout. Requires that libxml was
                  compiled with debugging enabled.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-debug-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-debug-source'>static VALUE rxml_document_debug(VALUE self)&#x000A;{&#x000A;#ifdef LIBXML_DEBUG_ENABLED&#x000A;  xmlDocPtr xdoc;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  xmlDebugDumpDocument(NULL, xdoc);&#x000A;  return Qtrue;&#x000A;#else&#x000A;  rb_warn(&quot;libxml was compiled without debugging support.&quot;);&#x000A;  return Qfalse;&#x000A;#endif&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-encoding'>
                <a name='method-i-encoding'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.encoding -> XML::Encoding::UTF_8</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Returns the <a href="../../LibXML.html">LibXML</a> encoding constant
                  specified by this document.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-encoding-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-encoding-source'>static VALUE rxml_document_encoding_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;  const char *xencoding;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  xencoding = (const char*)xdoc-&gt;encoding;&#x000A;  return INT2NUM(xmlParseCharEncoding(xencoding));&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-encoding-3D'>
                <a name='method-i-encoding-3D'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.encoding = XML::Encoding::UTF_8</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Set the encoding for this document.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-encoding-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-encoding-3D-source'>static VALUE rxml_document_encoding_set(VALUE self, VALUE encoding)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;  const char* xencoding = xmlGetCharEncodingName((xmlCharEncoding)NUM2INT(encoding));&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;encoding != NULL)&#x000A;    xmlFree((xmlChar *) xdoc-&gt;encoding);&#x000A;&#x000A;  xdoc-&gt;encoding = xmlStrdup((xmlChar *)xencoding);&#x000A;  return self;&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-find'>
                <a name='method-i-find'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.find(xpath, nslist=nil) -> XML::XPath::Object</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Return the nodes matching the specified xpath expression,  optionally using
                  the specified namespace.  For more  information about working with
                  namespaces, please refer to the <a href="XPath.html">XML::XPath</a>
                  documentation.</p>
                  
                  <p>Parameters:</p>
                  <ul><li>
                  <p>xpath - The xpath expression as a string</p>
                  </li><li>
                  <p>namespaces - An optional list of namespaces (see <a
                  href="XPath.html">XML::XPath</a> for information).</p>
                  </li></ul>
                  
                  <pre class="ruby"><span class="ruby-identifier">document</span>.<span class="ruby-identifier">find</span>(<span class="ruby-string">&#39;/foo&#39;</span>, <span class="ruby-string">&#39;xlink:http://www.w3.org/1999/xlink&#39;</span>)</pre>
                  
                  <p>IMPORTANT - The returned XML::Node::Set must be freed before its associated
                  document.  In a running Ruby program this will happen automatically via
                  Ruby&#39;s mark and sweep garbage collector. However, if the program exits,
                  Ruby does not guarantee the order in which objects are freed (see <a
                  href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/17700">blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/17700</a>).
                  As a result, the associated document may be freed before the node list,
                  which will cause a segmentation fault. To avoid this, use the following
                  (non-ruby like) coding style:</p>
                  
                  <pre>nodes = doc.find(&#39;/header&#39;)&#x000A;nodes.each do |node|&#x000A;  ... do stuff ...&#x000A;end</pre>
                  
                  <p>#  nodes = nil #  GC.start</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-find-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-find-source'><span class="ruby-comment"># File lib/libxml/document.rb, line 121</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">find</span>(<span class="ruby-identifier">xpath</span>, <span class="ruby-identifier">nslist</span> = <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">context</span>(<span class="ruby-identifier">nslist</span>).<span class="ruby-identifier">find</span>(<span class="ruby-identifier">xpath</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-find_first'>
                <a name='method-i-find_first'></a>
                <div class='synopsis'>
                  <span class='name'>find_first</span>
                  <span class='arguments'>(xpath, nslist = nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Return the first node matching the specified xpath expression. For more
                  information, please refer to the documentation for <a
                  href="Document.html#method-i-find">#find</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-find_first-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-find_first-source'><span class="ruby-comment"># File lib/libxml/document.rb, line 128</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_first</span>(<span class="ruby-identifier">xpath</span>, <span class="ruby-identifier">nslist</span> = <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">find</span>(<span class="ruby-identifier">xpath</span>, <span class="ruby-identifier">nslist</span>).<span class="ruby-identifier">first</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-import'>
                <a name='method-i-import'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.import(node) -> XML::Node</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Creates a copy of the node that can be inserted into the current document.</p>
                  
                  <p>IMPORTANT - The returned node MUST be inserted into the document. This is
                  because the returned node refereces internal <a
                  href="../../LibXML.html">LibXML</a> data structures owned by the document. 
                  Therefore, if the document is is freed before the the node is freed a
                  segmentation fault will occur.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-import-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-import-source'>static VALUE rxml_document_import(VALUE self, VALUE node)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;  xmlNodePtr xnode, xresult;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  Data_Get_Struct(node, xmlNode, xnode);&#x000A;&#x000A;  xresult = xmlDocCopyNode(xnode, xdoc, 1);&#x000A;&#x000A;  if (xresult == NULL)&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;&#x000A;  return rxml_node_wrap(xresult);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-last'>
                <a name='method-i-last'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.last -> node</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain the last node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-last-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-last-source'>static VALUE rxml_document_last_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;last == NULL)&#x000A;    return (Qnil);&#x000A;&#x000A;  return rxml_node_wrap(xdoc-&gt;last);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-last-3F'>
                <a name='method-i-last-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.last? -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Determine whether there is a last node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-last-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-last-3F-source'>static VALUE rxml_document_last_q(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;last == NULL)&#x000A;    return (Qfalse);&#x000A;  else&#x000A;    return (Qtrue);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-next'>
                <a name='method-i-next'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.next -> node</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain the next node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-next-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-next-source'>static VALUE rxml_document_next_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;next == NULL)&#x000A;    return (Qnil);&#x000A;&#x000A;  return rxml_node_wrap(xdoc-&gt;next);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-next-3F'>
                <a name='method-i-next-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.next? -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Determine whether there is a next node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-next-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-next-3F-source'>static VALUE rxml_document_next_q(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;next == NULL)&#x000A;    return (Qfalse);&#x000A;  else&#x000A;    return (Qtrue);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-node_type'>
                <a name='method-i-node_type'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>node.type -> num</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain this node&#39;s type identifier.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-node_type-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-node_type-source'>static VALUE rxml_document_node_type(VALUE self)&#x000A;{&#x000A;  xmlNodePtr xnode;&#x000A;  Data_Get_Struct(self, xmlNode, xnode);&#x000A;  return (INT2NUM(xnode-&gt;type));&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-node_type_name'>
                <a name='method-i-node_type_name'></a>
                <div class='synopsis'>
                  <span class='name'>node_type_name</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns this node&#39;s type name</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-node_type_name-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-node_type_name-source'><span class="ruby-comment"># File lib/libxml/document.rb, line 133</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">node_type_name</span>&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">node_type</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">DOCUMENT_NODE</span>&#x000A;    <span class="ruby-string">&#39;document_xml&#39;</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">DOCB_DOCUMENT_NODE</span>&#x000A;    <span class="ruby-string">&#39;document_docbook&#39;</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML_DOCUMENT_NODE</span>&#x000A;    <span class="ruby-string">&#39;document_html&#39;</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">UnknownType</span>, <span class="ruby-string">&quot;Unknown node type: %n&quot;</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">node_type</span>);&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-order_elements-21'>
                <a name='method-i-order_elements-21'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.order_elements!</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Call this routine to speed up <a href="XPath.html">XPath</a> computation on
                  static documents. This stamps all the element nodes with the document
                  order.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-order_elements-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-order_elements-21-source'>static VALUE rxml_document_order_elements(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  return LONG2FIX(xmlXPathOrderDocElems(xdoc));&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-parent'>
                <a name='method-i-parent'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.parent -> node</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain the parent node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-parent-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-parent-source'>static VALUE rxml_document_parent_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;parent == NULL)&#x000A;    return (Qnil);&#x000A;&#x000A;  return rxml_node_wrap(xdoc-&gt;parent);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-parent-3F'>
                <a name='method-i-parent-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.parent? -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Determine whether there is a parent node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-parent-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-parent-3F-source'>static VALUE rxml_document_parent_q(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;parent == NULL)&#x000A;    return (Qfalse);&#x000A;  else&#x000A;    return (Qtrue);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-prev'>
                <a name='method-i-prev'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.prev -> node</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain the previous node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-prev-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-prev-source'>static VALUE rxml_document_prev_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;prev == NULL)&#x000A;    return (Qnil);&#x000A;&#x000A;  return rxml_node_wrap(xdoc-&gt;prev);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-prev-3F'>
                <a name='method-i-prev-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.prev? -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Determine whether there is a previous node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-prev-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-prev-3F-source'>static VALUE rxml_document_prev_q(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  if (xdoc-&gt;prev == NULL)&#x000A;    return (Qfalse);&#x000A;  else&#x000A;    return (Qtrue);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-rb_encoding'>
                <a name='method-i-rb_encoding'></a>
                <div class='synopsis'>
                  <span class='name'>rb_encoding</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-rb_encoding-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-rb_encoding-source'>static VALUE rxml_document_rb_encoding_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;  const char *xencoding;&#x000A;  rb_encoding* rbencoding;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;&#x000A;  xencoding = (const char*)xdoc-&gt;encoding;&#x000A;  rbencoding = rxml_xml_encoding_to_rb_encoding(mXMLEncoding, xmlParseCharEncoding(xencoding));&#x000A;  return rb_enc_from_encoding(rbencoding);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-root'>
                <a name='method-i-root'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.root -> node</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain the root node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-root-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-root-source'>static VALUE rxml_document_root_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  xmlNodePtr root;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  root = xmlDocGetRootElement(xdoc);&#x000A;&#x000A;  if (root == NULL)&#x000A;    return (Qnil);&#x000A;&#x000A;  return rxml_node_wrap(root);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-root-3D'>
                <a name='method-i-root-3D'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.root = node</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Set the root node.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-root-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-root-3D-source'>static VALUE rxml_document_root_set(VALUE self, VALUE node)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;  xmlNodePtr xroot, xnode;&#x000A;&#x000A;  if (rb_obj_is_kind_of(node, cXMLNode) == Qfalse)&#x000A;    rb_raise(rb_eTypeError, &quot;must pass an XML::Node type object&quot;);&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  Data_Get_Struct(node, xmlNode, xnode);&#x000A;&#x000A;  if (xnode-&gt;doc != NULL &amp;&amp; xnode-&gt;doc != xdoc)&#x000A;    rb_raise(eXMLError, &quot;Nodes belong to different documents.  You must first import the node by calling XML::Document.import&quot;);&#x000A;&#x000A;  xroot = xmlDocSetRootElement(xdoc, xnode);&#x000A;  return node;&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-save'>
                <a name='method-i-save'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.save(filename) -> int</div>
                    <div>document.save(filename, :indent => true, :encoding => XML::Encoding::UTF_8) -> int</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Saves a document to a file.  You may provide an optional hash table to
                  control how the string is generated.  Valid options are:</p>
                  
                  <p>:indent - Specifies if the string should be indented.  The default value is
                  true.  Note that indentation is only added if both :indent is true and <a
                  href="../XML.html#method-c-indent_tree_output">LibXML::XML.indent_tree_output</a>
                  is true.  If :indent is set to false, then both indentation and line feeds
                  are removed from the result.</p>
                  
                  <p>:encoding - Specifies the output encoding of the string.  It defaults to
                  the original encoding of the document (see <a
                  href="Document.html#method-i-encoding">encoding</a>.  To override the
                  orginal encoding, use one of the <a href="Encoding.html">XML::Encoding</a>
                  encoding constants.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-save-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-save-source'>static VALUE rxml_document_save(int argc, VALUE *argv, VALUE self)&#x000A;{&#x000A;  VALUE options = Qnil;&#x000A;  VALUE filename = Qnil;&#x000A;  xmlDocPtr xdoc;&#x000A;  int indent = 1;&#x000A;  const char *xfilename;&#x000A;  const char *xencoding;&#x000A;  int length;&#x000A;&#x000A;  rb_scan_args(argc, argv, &quot;11&quot;, &amp;filename, &amp;options);&#x000A;&#x000A;  Check_Type(filename, T_STRING);&#x000A;  xfilename = StringValuePtr(filename);&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  xencoding = xdoc-&gt;encoding;&#x000A;&#x000A;  if (!NIL_P(options))&#x000A;  {&#x000A;    VALUE rencoding, rindent;&#x000A;    Check_Type(options, T_HASH);&#x000A;    rencoding = rb_hash_aref(options, ID2SYM(rb_intern(&quot;encoding&quot;)));&#x000A;    rindent = rb_hash_aref(options, ID2SYM(rb_intern(&quot;indent&quot;)));&#x000A;&#x000A;    if (rindent == Qfalse)&#x000A;      indent = 0;&#x000A;&#x000A;    if (rencoding != Qnil)&#x000A;    {&#x000A;      xencoding = xmlGetCharEncodingName((xmlCharEncoding)NUM2INT(rencoding));&#x000A;      if (!xencoding)&#x000A;        rb_raise(rb_eArgError, &quot;Unknown encoding value: %d&quot;, NUM2INT(rencoding));&#x000A;    }&#x000A;  }&#x000A;&#x000A;  length = xmlSaveFormatFileEnc(xfilename, xdoc, xencoding, indent);&#x000A;&#x000A;  if (length == -1)&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;&#x000A;  return (INT2NUM(length));&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-standalone-3F'>
                <a name='method-i-standalone-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.standalone? -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Determine whether this is a standalone document.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-standalone-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-standalone-3F-source'>static VALUE rxml_document_standalone_q(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  if (xdoc-&gt;standalone)&#x000A;    return (Qtrue);&#x000A;  else&#x000A;    return (Qfalse);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-to_s'>
                <a name='method-i-to_s'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.to_s -> "string"</div>
                    <div>document.to_s(:indent => true, :encoding => XML::Encoding::UTF_8) -> "string"</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Converts a document, and all of its children, to a string representation.
                  You may provide an optional hash table to control how the string is
                  generated.  Valid options are:</p>
                  
                  <p>:indent - Specifies if the string should be indented.  The default value is
                  true.  Note that indentation is only added if both :indent is true and <a
                  href="../XML.html#method-c-indent_tree_output">LibXML::XML.indent_tree_output</a>
                  is true.  If :indent is set to false, then both indentation and line feeds
                  are removed from the result.</p>
                  
                  <p>:encoding - Specifies the output encoding of the string.  It defaults to
                  XML::Encoding::UTF8.  To change it, use one of the <a
                  href="Encoding.html">XML::Encoding</a> encoding constants.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-to_s-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-to_s-source'>static VALUE rxml_document_to_s(int argc, VALUE *argv, VALUE self)&#x000A;{&#x000A;  VALUE result;&#x000A;  VALUE options = Qnil;&#x000A;  xmlDocPtr xdoc;&#x000A;  int indent = 1;&#x000A;  const char *xencoding = &quot;UTF-8&quot;;&#x000A;  xmlChar *buffer;&#x000A;  int length;&#x000A;&#x000A;  rb_scan_args(argc, argv, &quot;01&quot;, &amp;options);&#x000A;&#x000A;  if (!NIL_P(options))&#x000A;  {&#x000A;    VALUE rencoding, rindent;&#x000A;    Check_Type(options, T_HASH);&#x000A;    rencoding = rb_hash_aref(options, ID2SYM(rb_intern(&quot;encoding&quot;)));&#x000A;    rindent = rb_hash_aref(options, ID2SYM(rb_intern(&quot;indent&quot;)));&#x000A;&#x000A;    if (rindent == Qfalse)&#x000A;      indent = 0;&#x000A;&#x000A;    if (rencoding != Qnil)&#x000A;    {&#x000A;      xencoding = xmlGetCharEncodingName((xmlCharEncoding)NUM2INT(rencoding));&#x000A;      if (!xencoding)&#x000A;        rb_raise(rb_eArgError, &quot;Unknown encoding value: %d&quot;, NUM2INT(rencoding));&#x000A;    }&#x000A;  }&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  xmlDocDumpFormatMemoryEnc(xdoc, &amp;buffer, &amp;length, xencoding, indent);&#x000A;&#x000A;  result = rxml_new_cstr((const char*) buffer, xencoding);&#x000A;  xmlFree(buffer);&#x000A;  return result;&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-url'>
                <a name='method-i-url'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.url -> "url"</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain this document&#39;s source URL, if any.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-url-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-url-source'>static VALUE rxml_document_url_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  if (xdoc-&gt;URL == NULL)&#x000A;    return (Qnil);&#x000A;  else&#x000A;    return (rxml_new_cstr((const char*) xdoc-&gt;URL, NULL));&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-validate'>
                <a name='method-i-validate'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.validate(dtd) -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Validate this document against the specified XML::DTD. If the document is
                  valid the method returns true.  Otherwise an exception is raised with
                  validation information.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-validate-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-validate-source'>static VALUE rxml_document_validate_dtd(VALUE self, VALUE dtd)&#x000A;{&#x000A;  xmlValidCtxt ctxt;&#x000A;  xmlDocPtr xdoc;&#x000A;  xmlDtdPtr xdtd;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  Data_Get_Struct(dtd, xmlDtd, xdtd);&#x000A;&#x000A;  /* Setup context */&#x000A;  memset(&amp;ctxt, 0, sizeof(xmlValidCtxt));&#x000A;&#x000A;  if (xmlValidateDtd(&amp;ctxt, xdoc, xdtd))&#x000A;  {&#x000A;    return Qtrue;&#x000A;  }&#x000A;  else&#x000A;  {&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;    return Qfalse;&#x000A;  }&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-validate_relaxng'>
                <a name='method-i-validate_relaxng'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.validate_relaxng(relaxng)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Validate this document against the specified <a
                  href="RelaxNG.html">XML::RelaxNG</a>. If the document is valid the method
                  returns true.  Otherwise an exception is raised with validation
                  information.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-validate_relaxng-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-validate_relaxng-source'>static VALUE rxml_document_validate_relaxng(VALUE self, VALUE relaxng)&#x000A;{&#x000A;  xmlRelaxNGValidCtxtPtr vptr;&#x000A;  xmlDocPtr xdoc;&#x000A;  xmlRelaxNGPtr xrelaxng;&#x000A;  int is_invalid;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  Data_Get_Struct(relaxng, xmlRelaxNG, xrelaxng);&#x000A;&#x000A;  vptr = xmlRelaxNGNewValidCtxt(xrelaxng);&#x000A;&#x000A;  is_invalid = xmlRelaxNGValidateDoc(vptr, xdoc);&#x000A;  xmlRelaxNGFreeValidCtxt(vptr);&#x000A;  if (is_invalid)&#x000A;  {&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;    return Qfalse;&#x000A;  }&#x000A;  else&#x000A;  {&#x000A;    return Qtrue;&#x000A;  }&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-validate_schema'>
                <a name='method-i-validate_schema'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.validate_schema(schema)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Validate this document against the specified <a
                  href="Schema.html">XML::Schema</a>. If the document is valid the method
                  returns true.  Otherwise an exception is raised with validation
                  information.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-validate_schema-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-validate_schema-source'>static VALUE rxml_document_validate_schema(VALUE self, VALUE schema)&#x000A;{&#x000A;  xmlSchemaValidCtxtPtr vptr;&#x000A;  xmlDocPtr xdoc;&#x000A;  xmlSchemaPtr xschema;&#x000A;  int is_invalid;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  Data_Get_Struct(schema, xmlSchema, xschema);&#x000A;&#x000A;  vptr = xmlSchemaNewValidCtxt(xschema);&#x000A;&#x000A;  is_invalid = xmlSchemaValidateDoc(vptr, xdoc);&#x000A;  xmlSchemaFreeValidCtxt(vptr);&#x000A;  if (is_invalid)&#x000A;  {&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;    return Qfalse;&#x000A;  }&#x000A;  else&#x000A;  {&#x000A;    return Qtrue;&#x000A;  }&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-version'>
                <a name='method-i-version'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.version -> "version"</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Obtain the <a href="../XML.html">XML</a> version specified by this
                  document.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-version-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-version-source'>static VALUE rxml_document_version_get(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  if (xdoc-&gt;version == NULL)&#x000A;    return (Qnil);&#x000A;  else&#x000A;    return (rxml_new_cstr((const char*) xdoc-&gt;version, NULL));&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-xhtml-3F'>
                <a name='method-i-xhtml-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.xhtml? -> (true|false)</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Determine whether this is an XHTML document.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-xhtml-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-xhtml-3F-source'>static VALUE rxml_document_xhtml_q(VALUE self)&#x000A;{&#x000A;  xmlDocPtr xdoc;&#x000A;        xmlDtdPtr xdtd;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;        xdtd = xmlGetIntSubset(xdoc);&#x000A;  if (xdtd != NULL &amp;&amp; xmlIsXHTML(xdtd-&gt;SystemID, xdtd-&gt;ExternalID) &gt; 0)&#x000A;    return (Qtrue);&#x000A;  else&#x000A;    return (Qfalse);&#x000A;}</pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-xinclude'>
                <a name='method-i-xinclude'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>document.xinclude -> num</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Process xinclude directives in this document.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-xinclude-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-xinclude-source'>static VALUE rxml_document_xinclude(VALUE self)&#x000A;{&#x000A;#ifdef LIBXML_XINCLUDE_ENABLED&#x000A;  xmlDocPtr xdoc;&#x000A;&#x000A;  int ret;&#x000A;&#x000A;  Data_Get_Struct(self, xmlDoc, xdoc);&#x000A;  ret = xmlXIncludeProcess(xdoc);&#x000A;  if (ret &gt;= 0)&#x000A;  {&#x000A;    return(INT2NUM(ret));&#x000A;  }&#x000A;  else&#x000A;  {&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;    return Qnil;&#x000A;  }&#x000A;#else&#x000A;  rb_warn(&#x000A;      &quot;libxml was compiled without XInclude support.  Please recompile libxml and ruby-libxml&quot;);&#x000A;  return (Qfalse);&#x000A;#endif&#x000A;}</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
